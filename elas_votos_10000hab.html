<!doctype html>
  <meta charset="utf-8">
    <script src="d3plus/d3.min.js"></script>
      <script src="d3plus/d3plus.min.js"></script>
          <div id="scatter"></div>
          <script>
          var visualization = d3plus.viz()
          .container("#scatter")
          .data("elas_votos_10000hab.json")
          .type("scatter")
          .width(false)
          .height(false)
          .resize(true)
          .id(["region","comuna"])
          .size("pob14_comuna")
          .x("pcent_elas")
          .y("pcent_votos")
          .color("color")
          .depth(1)
          .format({
            "text": function(text, params) {
              if (text === "pob14_comuna") {
                return "Población";
              }
              if (text === "pcent_elas") {
                return "% de encuentros locales";
              }
              if (text === "pcent_votos") {
                return "% de participación en elecciones presidenciales";
              }
              else {
                return d3plus.string.title(text, params);
              }
            },
            "number": function(number, params) {
              var formatted = d3plus.number.format(number, params);
              if (params.key === "pcent_votos") {
                return formatted + "%";
              }
              if (params.key === "pcent_elas") {
                return formatted + "%";
              }
              else {
                return formatted;
              }
            }
          })
          .font({"family": "Lato"})
          .title("Encuentros locales versus participación en elecciones")
          .title({"sub": "Comunas con más de 10,000 habitantes mayores de 14 años"})
          .tooltip(["pob14_comuna","pcent_votos","pcent_elas"])
          .legend({"order": {"sort": "desc", "value": "region"}})
          .active({"value": function(d){ return d["pob14_comuna"] > 10000; }, "spotlight":true})
          .draw()
          </script>
<link href="https://fonts.googleapis.com/css?family=Lato:400,700" rel="stylesheet" type="text/css">
