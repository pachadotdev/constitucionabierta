<!doctype html>
  <meta charset="utf-8">
    <script src="d3plus/d3.min.js"></script>
    <script src="d3plus/d3plus.min.js"></script>
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico?">
          <div id="siete_conceptos"></div>
          <script>
          var visualization = d3plus.viz()
          .container("#siete_conceptos")
          .data("graficos/7conceptos_data_mas_ingresos.json")
          .edges("graficos/7conceptos_edges.json")
          .nodes("graficos/7conceptos_nodes.json")
          .type("network")
          .width(false)
          .height(false)
          .resize(true)
          .id(["comuna"])
          .size(false)
          .font({"family": "Kievit, Open Sans, sans-serif"})
          .labels({"align": "center", "valign": "middle"})
          .depth(0)
          .format({
            "text": function(text, params) {
              
              if (text === "concepto1") {
                return "Concepto 1";
              }
              if (text === "concepto2") {
                return "Concepto 2";
              }
              if (text === "concepto3") {
                return "Concepto 3";
              }
              if (text === "concepto4") {
                return "Concepto 4";
              }
              if (text === "concepto5") {
                return "Concepto 5";
              }
              if (text === "concepto6") {
                return "Concepto 6";
              }
              if (text === "concepto7") {
                return "Concepto 7";
              }
              if (text === "ingreso_medio_2015") {
                return "Ingreso medio";
              }
              if (text === "ingreso_mediano_2015") {
                return "Ingreso mediano";
              }
              if (text === "gini_2015") {
                return "Coeficiente de Gini";
              }
              if (text === "ic_ingreso_medio_2015") {
                return "I.C. ingreso medio";
              }
              if (text === "ic_ingreso_mediano_2015") {
                return "I.C. ingreso mediano";
              }
              if (text === "ic_gini_2015") {
                return "I.C. Gini";
              }
              else {
                return d3plus.string.title(text, params);
              }
            },
            "number": function(number, params) {
              var myLocale = {
                "decimal": ",",
                "thousands": ".",
                "grouping": [3],
                "currency": ["$", ""],
                "dateTime": "%a %b %e %X %Y",
                "date": "%m/%d/%Y",
                "time": "%H:%M:%S",
                "periods": ["AM", "PM"],
                "days": ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                "shortDays": ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
                "months": ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
                "shortMonths": ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
              };
              var localeFormatter = d3.locale(myLocale);
              var numberFormat = localeFormatter.numberFormat(",.2r");
              var formatted = d3plus.number.format(number, params);
                if (params.key === "encuentros") {
                  return numberFormat(number);
                }
                if (params.key === "poblacion") {
                  return numberFormat(number);
                }
                else {
                  return formatted;
                }
            },
            "locale": "es_ES"
          })
          .color(["color4"])
          .legend({"tooltip":false, "value":false, "filters": true})
          .tooltip(["ingreso_medio_2015","ingreso_mediano_2015","gini_2015","concepto1","concepto2","concepto3","concepto4","concepto5","concepto6","concepto7"])
          .title("Comunas de la Región Metropolitana")
          .title({"sub":"Grupos obtenidos usando k-means con 4 centroides (Hartigan y Wong, 1979). Datos socioeconómicos obtenidos a partir de CASEN 2015 (MDS)"})
          .draw();
          </script>